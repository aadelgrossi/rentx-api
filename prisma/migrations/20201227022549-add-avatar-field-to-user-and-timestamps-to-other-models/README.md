# Migration `20201227022549-add-avatar-field-to-user-and-timestamps-to-other-models`

This migration has been generated by Andre Grossi at 12/26/2020, 11:25:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Car" ADD COLUMN     "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updatedAt" TIMESTAMP(3) NOT NULL

ALTER TABLE "CarManufacturer" ADD COLUMN     "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updatedAt" TIMESTAMP(3) NOT NULL

ALTER TABLE "Photo" ADD COLUMN     "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updatedAt" TIMESTAMP(3) NOT NULL

ALTER TABLE "User" ADD COLUMN     "avatarId" TEXT NOT NULL

ALTER TABLE "User" ADD FOREIGN KEY("avatarId")REFERENCES "Photo"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201227020327-update-car-and-user-models..20201227022549-add-avatar-field-to-user-and-timestamps-to-other-models
--- datamodel.dml
+++ datamodel.dml
@@ -2,23 +2,25 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model User {
-  id        String   @id @default(cuid())
-  email     String   @unique
-  name      String
-  password  String
-  admin Boolean @default(false)
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  id                  String   @id @default(cuid())
+  email               String   @unique
+  name                String
+  password            String
+  avatarId            String
+  avatar              Photo @relation(fields: [avatarId], references: [id])     
+  admin               Boolean @default(false)
+  createdAt           DateTime @default(now())
+  updatedAt           DateTime @updatedAt
 }
 enum FuelType {
   gas
@@ -31,28 +33,31 @@
   manual
 }
 model CarManufacturer {
-  id        String @id @default(cuid())
-  name      String @unique
+  id                  String @id @default(cuid())
+  name                String @unique
+  createdAt           DateTime @default(now())
+  updatedAt           DateTime @updatedAt
 }
 model Photo {
-  id        String @id @default(cuid())
-  url       String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  id                  String @id @default(cuid())
+  url                 String
+  createdAt           DateTime @default(now())
+  updatedAt           DateTime @updatedAt
 }
 model Car {
-  id                String @id @default(cuid())
-  name              String
-  manufacturerId    String
-  manufacturer      CarManufacturer @relation(fields: [manufacturerId], references: [id])
-  dailyRate         Int
-  photoId           String
-  photo             Photo @relation(fields: [photoId], references: [id])
-  fuelType          FuelType
-  transmission      Transmission
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  id                  String @id @default(cuid())
+  name                String
+  manufacturerId      String
+  manufacturer        CarManufacturer @relation(fields: [manufacturerId], references: [id])
+  year                Int
+  dailyRate           Int
+  photoId             String
+  photo               Photo @relation(fields: [photoId], references: [id])
+  fuelType            FuelType
+  transmission        Transmission
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
 }
```


